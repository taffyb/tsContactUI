<div class="background" (click)="onCancel()"></div>
<div class="form" >
  <h2 class="title">
  	<img class="icon-small" src={{getIcon()}}/>
  	{{title}}
  	<span class="close" (click)="onCancel()">X</span></h2>
  <form class="form-vertical" (ngSubmit)="onSubmit()" [formGroup]="form">
    <div class="tabbar">
		<div *ngFor="let tab of ['Details','Notes']" 
			[ngClass]="{
						 'tab':true,
					     'active':activeTab==tab
					   }"
			(click)="activeTab=tab">{{tab}}</div>
	</div>
    <div *ngFor="let field of fields"  class="form-row">
      <app-field [field]="field" [form]="form"></app-field>
    </div>
	<p>
    <div class="form-row">
      <button type="submit" [disabled]="!form.valid || !formChanged">Save</button> &nbsp;
      <button type="button" (click)="onCancel()">Cancel</button> &nbsp;
    </div>
  </form>
</div>
